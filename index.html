<header class="topbar">
  <div class="wrap topbar__inner">
    <div class="brand">
      <div class="brand__logo">Q</div>
      <div class="brand__text">
        <div class="brand__title">AI Quiz Generator</div>
        <div class="brand__sub">Encrypted local vault • Slides • Submit + grade</div>
      </div>
    </div>

    <div class="topbar__actions">
      <button id="openSettingsBtn" class="btn btn--ghost">Settings</button>
      <button id="openLibraryBtn" class="btn btn--ghost">Quizzes</button>
      <button id="lockBtn" class="btn btn--ghost" hidden>Lock</button>
      <button id="resetBtn" class="btn btn--danger">Reset</button>
    </div>
  </div>
</header>

<div id="drawerOverlay" class="overlay" hidden></div>

<!-- SETTINGS DRAWER -->
<aside id="settingsDrawer" class="drawer drawer--left" aria-hidden="true">
  <div class="drawer__header">
    <div>
      <div class="drawer__title">Settings</div>
      <div class="muted small">Stored encrypted locally.</div>
    </div>
    <button id="closeSettingsBtn" class="btn btn--ghost">✕</button>
  </div>

  <div class="card card--flat">
    <div class="field">
      <label for="apiKey">API key</label>
      <input id="apiKey" type="password" autocomplete="off" placeholder="sk-..." />
      <div class="muted small">Client-side demo. A proxy is safer.</div>
    </div>

    <div class="grid grid--2">
      <div class="field">
        <label for="difficulty">Difficulty</label>
        <select id="difficulty">
          <option value="easy">easy</option>
          <option value="medium" selected>medium</option>
          <option value="hard">hard</option>
        </select>
      </div>

      <div class="field">
        <label for="defaultChoices">Choices</label>
        <select id="defaultChoices">
          <option value="4" selected>4</option>
          <option value="5">5</option>
          <option value="6">6</option>
        </select>
      </div>
    </div>

    <div class="field">
      <label for="model">Model</label>
      <select id="model"></select>
    </div>

    <div class="field">
      <label for="endpoint">Endpoint</label>
      <input id="endpoint" type="text" placeholder="https://api.openai.com/v1/responses" />
    </div>

    <div class="grid grid--2">
      <div class="field">
        <label for="temperature">Temperature</label>
        <input id="temperature" type="number" min="0" max="2" step="0.1" value="0.7" />
      </div>
      <div class="field">
        <label for="maxTokens">Max output tokens</label>
        <input id="maxTokens" type="number" min="256" step="128" value="1800" />
      </div>
    </div>

    <div class="row">
      <button id="saveSettingsBtn" class="btn btn--primary btn--block">Save settings</button>
    </div>

    <div class="status" id="settingsStatus" aria-live="polite"></div>
  </div>
</aside>

<!-- QUIZ LIBRARY DRAWER -->
<aside id="libraryDrawer" class="drawer drawer--right" aria-hidden="true">
  <div class="drawer__header">
    <div>
      <div class="drawer__title">Saved Quizzes</div>
      <div class="muted small">Load / Copy / Delete</div>
    </div>
    <button id="closeLibraryBtn" class="btn btn--ghost">✕</button>
  </div>

  <div class="card card--flat">
    <div id="quizList" class="list"></div>
    <div class="status" id="libraryStatus" aria-live="polite"></div>
  </div>
</aside>

<!-- LOCK SCREEN -->
<section id="lockScreen" class="wrap">
  <div class="card">
    <div class="card__header">
      <h2 id="lockTitle">Unlock</h2>
      <p class="muted" id="lockHint">Enter your master password to decrypt local storage.</p>
    </div>

    <div class="grid grid--2">
      <div class="field">
        <label for="masterPassword">Master password</label>
        <input id="masterPassword" type="password" autocomplete="current-password" placeholder="••••••••" />
      </div>

      <div class="field" id="confirmWrap" hidden>
        <label for="masterPasswordConfirm">Confirm password</label>
        <input id="masterPasswordConfirm" type="password" autocomplete="new-password" placeholder="••••••••" />
      </div>
    </div>

    <div class="row row--between">
      <label class="check">
        <input type="checkbox" id="rememberPassword" />
        <span>Remember password</span>
      </label>

      <button id="unlockBtn" class="btn btn--primary">Unlock</button>
    </div>

    <div class="notice">
      <strong>Note:</strong> Remembering password reduces security.
    </div>

    <div class="status" id="lockStatus" aria-live="polite"></div>
  </div>
</section>

<!-- MAIN APP -->
<main id="app" class="wrap" hidden>
  <div class="card">
    <div class="card__header">
      <h3>Generate Quiz</h3>
      <p class="muted">Paste text → generate → saved automatically.</p>
    </div>

    <div class="field">
      <label for="sourceText">Source text</label>
      <textarea id="sourceText" rows="10" placeholder="Paste the text you want to quiz yourself on..."></textarea>
    </div>

    <div class="grid grid--3">
      <div class="field">
        <label for="questionCount">Questions</label>
        <input id="questionCount" type="number" min="1" max="100" value="10" />
      </div>

      <div class="field">
        <label for="quizTitle">Title (optional)</label>
        <input id="quizTitle" type="text" placeholder="Auto-title if blank" />
      </div>

      <div class="field">
        <label>&nbsp;</label>
        <button id="generateBtn" class="btn btn--primary btn--block">Generate</button>
      </div>
    </div>

    <div class="status" id="genStatus" aria-live="polite"></div>
  </div>

  <div id="playerCard" class="card" hidden>
    <div class="card__header row row--between">
      <div>
        <h3 id="playerTitle">Quiz</h3>
        <div class="muted small" id="playerMeta"></div>
      </div>
      <div class="row">
        <button id="copyQuizBtn" class="btn btn--ghost">Copy</button>
        <button id="submitBtn" class="btn btn--primary">Submit</button>
        <button id="scoreBtn" class="btn btn--ghost">Score</button>
        <button id="saveNowBtn" class="btn btn--ghost">Save</button>
      </div>
    </div>

    <div class="player">
      <div class="player__question">
        <div class="qhead">
          <div id="qProgress" class="qprogress">1 / 1</div>
          <div id="qText" class="qtext"></div>
        </div>

        <div id="qChoices" class="choices"></div>
        <div id="qExplain" class="explain"></div>

        <div class="nav">
          <button id="prevBtn" class="btn">Prev</button>
          <button id="nextBtn" class="btn btn--primary">Next</button>
        </div>

        <div class="row row--between addmore">
          <div class="row">
            <input id="addCount" type="number" min="1" max="50" value="5" />
            <button id="addMoreBtn" class="btn">Add questions</button>
          </div>
          <div class="status" id="playerStatus" aria-live="polite"></div>
        </div>
      </div>

      <div class="player__map">
        <div class="map__title">Jump to question</div>
        <div id="qMap" class="qmap"></div>
        <div id="scoreBox" class="scorebox" hidden></div>
        <div id="resultsPanel" class="results" hidden></div>
      </div>
    </div>
  </div>
</main>
